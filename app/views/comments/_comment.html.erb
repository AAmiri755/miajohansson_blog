<li class="list-group-item comment" id="comment_<%=comment.id %>">
  <% if (comment.user_id.eql? current_user.id) || (comment.post.user_id.eql? current_user.id) || (current_user.admin) %>
    <%= link_to comment_path(comment), method: :delete, data: {confirm: "Are you sure you want to delete this comment?"}, class: "delete_btn_x", :remote => true do %>
      <i class="fa fa-times"></i>
    <% end %>
  <% end %>
  <% @profile_img = comment.user.profile.exists? ? image_tag(comment.user.profile.url(:square), :class => "profile_img_small") : image_tag("profile_image", :class => "profile_img_small") %>
  <%= link_to(@profile_img, comment.user) %>
  <div class="li-content" style="width: 100%;">
    <h6><%= link_to comment.user.full_name, comment.user %></h6>
    <span class="date_ago"><%= time_ago_in_words(comment.created_at) %> ago</span><br>
    <span><%= comment.text %></span>
    <% @reply_text = comment.comments.present? ? "Reply (#{comment.comments.count})" : "Reply" %>
    <% if comment.comment_id.nil? %>
      <p id="toggle" onclick="reply('#reply_<%= comment.id %>')" class="link_theme toggle_<%= comment.id %>"><%= @reply_text %></p>
    <% end %>
    <%= render :partial => 'comments/reply_form', locals: {post: comment.post, comment: @comment, parent: comment } %>
  </div>
</li>
