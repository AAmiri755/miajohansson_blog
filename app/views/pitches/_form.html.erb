<%= form_for @pitch do |f| %>
  <% if @pitch.errors.any? %>
    <h2><%= pluralize(@pitch.errors.count, "error")%> prevented this post from saving:</h2>
    <ul>
      <% @pitch.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
      <% end %>
    </ul>
  <% end %>

  <div class="pitch_flds">
    <p>Write a <a href="#">Shareable</a> and/or <a href="Searchable">Searchable</a> title here:</p>
    <%= f.text_field :title, placeholder: "Title" %>

    <p>Explain your idea and why the article topic fits <a href="requirements">The Teen Magazine's audience</a>:</p>
    <%= f.text_area :description, placeholder: "Your idea..." %>

    <div class="margin_flds">
      <%= f.collection_select(:category_id, @categories, :id, :name, {prompt: "Select a Category"}) %>
    </div>

    <% if @pitch.try(:thumbnail).present? %>
      <%= image_tag(@pitch.thumbnail, class: "thumbnail_img") %>
    <% end %>

    <div class="margin_flds">
      <p>Upload a <a href="royalty free">royalty free and eye catching</a> thumbnail image</p>
      <%= f.file_field :thumbnail %>
    </div>

    <% if current_user.editor? && @pitch.title.nil? %>
      <%= f.check_box :assign_if_not_claimed, style: "display: inline;" %>
      <span>Automatically assign this pitch to a writer if it's not claimed in two weeks.</span><br>
    <% end %>

    <% if @pitch.slug.nil? && !@pitch.user.try(:editor) %>
      <%= f.hidden_field :status, value: "Ready for Review" %>
      <% @button_text = "Submit Pitch" %>
    <% elsif @pitch.slug.nil? %>
      <% @button_text = "Share Pitch" %>
    <% else %>
      <% @button_text = "Save Changes" %>
    <% end %>
    <div class="btn_cntnr pb-0 mt-4 pt-2" style="float: none !important;"><%= f.submit @button_text, class: "newpost--new--profile mr-0" %></div>
  </div>
<% end %>
